{% extends "layouts/backLayout.html" %}
{% block tabs_content %}
    <div class="container">
        <blockquote>
            手机绑定
        </blockquote>
        <div class="card-panel">
            <form id="phoneForm">
                <div class="row"></div>
                <div class="input-field s10 m8 l8">
                    <i class="material-icons prefix"><i class="material-icons ">perm_identity</i></i>
                  <input type="text" id="phoneNumber" name="phoneNuber">
                    <label for="phoneNumber"></label>
                </div>
                <div class="input-field s10 m8 l8">
                    <i class="material-icons prefix"><i class="material-icons ">info_outline</i></i>
                    <input type="text"id="code"name="code">
                    <label for="code"></label>
                </div>
                <div class="row"></div>
                <div class="row">
                    <div class="button col s6 m6 l6">
                        <input class="btn waves-effect waves-light #ef5350 orange" type="button" id="btn" value="获取验证码"
                               onclick="settime(this)"/>
                    </div>
                    <div class="button col s6 m6 l6 right-align">
                        <button class="btn waves-effect waves-light #ef5350 orange" type="submit">确定</button>
                    </div>
                </div>
                {% with messages = get_flashed_messages(with_categories=true) %}
                    <div class="row">
                        {% if messages %}
                            <ul id="flashes">
                                {% for message in messages %}
                                    {% if message[0] == 'message' %}
                                        <li class="blue-grey-text" style="opacity: 0">
                                            <i class="material-icons left">warning</i>
                                            <span class="flow-text">{{ message[1] }}</span>
                                        </li>
                                    {% elif message[0] == '错误' %}
                                        <li class="red-text" style="opacity: 0">
                                            <i class="material-icons left">clear</i>
                                            <span class="flow-text">{{ message[1] }}</span>
                                        </li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                {% endwith %}
            </form>
        </div>
    </div>
{% endblock %}
{% block script_content %}
    <script type="text/javascript">
        function send() {
            var phone = document.getElementById("phone_number").value;
            window.location.href = "/profile/send_sms%3Fphone_number%3D" + phone;
        }

        document.getElementById('btn').setAttribute("onclick", "send()");
        document.getElementById('phone_number').value = "{{phone_number}}";
        Materialize.showStaggeredList('#flashes');
    </script>
{% endblock %}