"use strict";$(document).ready(function(){var t=0,o=0,e=0;$(window).scroll(function(){t=$(window).scrollTop(),o=$(document).height(),e=$(window).height(),$(".counter").html(t),$(window).width()<992&&$("footer").addClass("scrolled-footer"),t+e>o-60?$("footer").addClass("scrolled-footer"):t+e<=o-60&&$("footer").removeClass("scrolled-footer"),t>=100?($("#global-nav").addClass("scrolled-nav"),$(".page-content").addClass("scrolled-content")):t<100&&($("#global-nav").removeClass("scrolled-nav"),$(".page-content").addClass("scrolled-content"))})});var defaultAction=function(t){return function(o){302===o.status?location.href=o.location:t(o)}},showToast=function(t){result&&Materialize.toast(t,3e3)},signinFormHandler=function(t){},loginFormHandler=function(t){},phoneFormHandler=function(t){t.status?($("#currentText").text("绑定信息（用于课程查询等）"),$("#phoneForm").fadeOut(300,function(){$("#confirmForm").fadeIn(300)})):Materialize.toast(t.msg,4e3)},profileFormHandler=function(t){},attendanceFormHandler=function(t){},reAttendanceFormHandler=function(t){},infoFormHandler=function(t){},codeSubmitFormHandler=function(t){},groupFormHandler=function(t){},changeGroupFormHandler=function(t){},sendAnnoFormHandler=function(t){t&&Materialize.toast(t,3e3)},manageMsgFormHandler=function(t){},activityFormHandler=function(t){t&&Materialize.toast(t,3e3)},issueFormHandler=function(t){t&&Materialize.toast(t,3e3)},confirmFormHandler=function(){result.status||Materialize.toast(result.msg,4e3)},sendSms=function(){var t=$("#section1"),o=$("<form></form>"),e=t.clone();o.append(e),$.afterPOST(function(t){$("#sendSms").text(t.message)})("/profile/send_sms")(o)},deleteMsg=function(t){var o=getId();$.post("/group/delete_msg%3Fgroup%3D"+o.toString()+"%3Fchannel%3Dboard%3Findex%3D"+t.toString(),defaultAction(showToast))},leaveGroup=function(t){$.post("/group/leave_group%3Fgroup%3D"+t,defaultAction(showToast))},kickOut=function(t,o){$.post("/group/kick_out%3Fgroup%3D"+t+"%3Ftarget%3D"+o,defaultAction(showToast))},switchRole=function(t,o,e){$.post("/group/switch_role%3Fgroup%3D"+t+"%3Ftarget%3D"+o+"%3Frole%3D"+e,defaultAction(showToast))},clearMsg=function(t){var o=getId();$.get("/group/clear_msg%3Fgroup%3D"+o+"%3Fchannel%3D"+t,defaultAction(showToast))},getActInfo=function(t){var o=getId();$.getJSON("/group/query_activity%3Fgroup%3D"+o+"%3Factivity%3D"+t,{},function(t){1==t.length?showToast(t):($("#act_infoName").text(t.name),$("#act_infoContent").text(t.info),$("#act_infoTime").text(t.start+" 至 "+t.end),$("#activity_info").modal("open"))})},deleteAct=function(t){var o=getId();$.get("/group/delete_activity%3Fgroup%3D"+o+"%3Factivity%3D"+t,defaultAction(showToast))},editAct=function(t){var o=getId();$("#activityID").val(t),$.getJSON("/group/query_activity%3Fgroup%3D"+o+"%3Factivity%3D"+t,{},function(t){if(1==t.length)showToast(t);else{var o=t.start.split(/[:-\s]/),e=[];o.forEach(function(t,o){e.push(parseInt(t))}),$("#activityChangeName").val(t.name),$("#activityChangeContent").val(t.info),$("#activityChangeStartTime").val(t.start.split(" ")[1]),$("#activityChangeStartDate").val(t.start.split(" ")[0]),$("#activityChangeEndTime").val(t.end.split(" ")[1]),$("#activityChangeEndDate").val(t.end.split(" ")[0]),Materialize.updateTextFields(),$("#activityChange").modal("open")}}),Materialize.updateTextFields()},switchAct=function(t,o){var e=getId();o?$.get("/group/active_activity%3Fgroup%3D"+e+"%3Factivity%3D"+t,defaultAction(showToast)):$.get("/group/deactive_activity%3Fgroup%3D"+e+"%3Factivity%3D"+t,defaultAction(showToast))};