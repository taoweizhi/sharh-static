!function(t,e){"use strict";var n;if("object"==typeof exports){try{n=require("moment")}catch(t){}module.exports=e(n)}else"function"==typeof define&&define.amd?define(function(t){return n=t.defined&&t.defined("moment")?t("moment"):void 0,e(n)}):t.Pikaday=e(t.moment)}(this,function(t){"use strict";var e="function"==typeof t,n=!!window.addEventListener,i=window.document,o=window.setTimeout,a=function(t,e,i,o){n?t.addEventListener(e,i,!!o):t.attachEvent("on"+e,i)},s=function(t,e,i,o){n?t.removeEventListener(e,i,!!o):t.detachEvent("on"+e,i)},r=function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")},l=function(t){return/Array/.test(Object.prototype.toString.call(t))},h=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},u=function(t){h(t)&&t.setHours(0,0,0,0)},d=function(t,e){return t.getTime()===e.getTime()},f=function(t,e,n){var i,o;for(i in e)(o=void 0!==t[i])&&"object"==typeof e[i]&&void 0===e[i].nodeName?h(e[i])?n&&(t[i]=new Date(e[i].getTime())):l(e[i])?n&&(t[i]=e[i].slice(0)):t[i]=f({},e[i],n):!n&&o||(t[i]=e[i]);return t},c={field:null,bound:void 0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],weekdays:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],weekdaysShort:["日","一","二","三","四","五","六"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},m=function(t,e,n){for(e+=t.firstDay;e>=7;)e-=7;return n?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},g=function(t,e,n,i,o){if(o)return'<td class="is-empty"></td>';var a=[];return i&&a.push("is-disabled"),n&&a.push("is-today"),e&&a.push("is-selected"),'<td data-day="'+t+'" class="'+a.join(" ")+'"><button class="pika-button" type="button">'+t+"</button></td>"},p=function(s){var l=this,u=l.config(s);l._onMouseDown=function(t){if(l._v){var e=(t=t||window.event).target||t.srcElement;if(e){if(!r(e,"is-disabled")){if(r(e,"pika-button")&&!r(e,"is-empty"))return l.setDate(new Date(l._y,l._m,parseInt(e.innerHTML,10))),void(u.bound&&o(function(){l.hide()},100));r(e,"pika-prev")?l.prevMonth():r(e,"pika-next")&&l.nextMonth()}if(r(e,"pika-select"))l._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}}},l._onChange=function(t){var e=(t=t||window.event).target||t.srcElement;e&&(r(e,"pika-select-month")?l.gotoMonth(e.value):r(e,"pika-select-year")&&l.gotoYear(e.value))},l._onInputChange=function(n){var i;n.firedBy!==l&&(i=e?(i=t(u.field.value,u.format))&&i.isValid()?i.toDate():null:new Date(Date.parse(u.field.value)),l.setDate(h(i)?i:null),l._v||l.show())},l._onInputFocus=function(){l.show()},l._onInputClick=function(){l.show()},l._onInputBlur=function(){l._c||(l._b=o(function(){l.hide()},50)),l._c=!1},l._onClick=function(t){var e=(t=t||window.event).target||t.srcElement,i=e;if(e){!n&&r(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),a(e,"change",l._onChange)));do{if(r(i,"pika-single"))return}while(i=i.parentNode);l._v&&e!==u.trigger&&l.hide()}},l.el=i.createElement("div"),l.el.className="pika-single"+(u.isRTL?" is-rtl":""),a(l.el,"mousedown",l._onMouseDown,!0),a(l.el,"change",l._onChange),u.field&&(u.bound?i.body.appendChild(l.el):u.field.parentNode.insertBefore(l.el,u.field.nextSibling),a(u.field,"change",l._onInputChange),u.defaultDate||(e&&u.field.value?u.defaultDate=t(u.field.value,u.format).toDate():u.defaultDate=new Date(Date.parse(u.field.value)),u.setDefaultDate=!0));var d=u.defaultDate;h(d)?u.setDefaultDate?l.setDate(d,!0):l.gotoDate(d):l.gotoDate(new Date),u.bound?(this.hide(),l.el.className+=" is-bound",a(u.trigger,"click",l._onInputClick),a(u.trigger,"focus",l._onInputFocus),a(u.trigger,"blur",l._onInputBlur)):this.show()};return p.prototype={config:function(t){this._o||(this._o=f({},c,!0));var e=f(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field;var n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,h(e.minDate)||(e.minDate=!1),h(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&(u(e.minDate),e.minYear=e.minDate.getFullYear(),e.minMonth=e.minDate.getMonth()),e.maxDate&&(u(e.maxDate),e.maxYear=e.maxDate.getFullYear(),e.maxMonth=e.maxDate.getMonth()),l(e.yearRange)){var i=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||c.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(t){if(!h(this._d))return"";var n=this._d.getFullYear(),i=this._d.getMonth()+1,o=this._d.getDate();return i=i<10?"0"+i:i,o=o<10?"0"+o:o,h(this._d)?e?window.moment(this._d).format(t||this._o.format):n+"-"+i+"-"+o:""},getMoment:function(){return e?t(this._d):null},setMoment:function(n){e&&t.isMoment(n)&&this.setDate(n.toDate())},getDate:function(){return h(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),h(t)){var n,o,a,s=this._o.minDate,r=this._o.maxDate;h(s)&&t<s?t=s:h(r)&&t>r&&(t=r),this._d=new Date(t.getTime()),u(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),n=this._o.field,"change",o={firedBy:this},i.createEvent?((a=i.createEvent("HTMLEvents")).initEvent("change",!0,!1),a=f(a,o),n.dispatchEvent(a)):i.createEventObject&&(a=i.createEventObject(),a=f(a,o),n.fireEvent("onchange",a))),!e&&"function"==typeof this._o.onSelect&&this._o.onSelect.call(this,this.getDate())}},gotoDate:function(t){h(t)&&(this._y=t.getFullYear(),this._m=t.getMonth(),this.draw())},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t=parseInt(t,10))||(this._m=t<0?0:t>11?11:t,this.draw())},nextMonth:function(){++this._m>11&&(this._m=0,this._y++),this.draw()},prevMonth:function(){--this._m<0&&(this._m=11,this._y--),this.draw()},gotoYear:function(t){isNaN(t)||(this._y=parseInt(t,10),this.draw())},setMinDate:function(t){this._o.minDate=t},setMaxDate:function(t){this._o.maxDate=t},draw:function(t){if(this._v||t){var e=this._o,n=e.minYear,i=e.maxYear,a=e.minMonth,s=e.maxMonth;if(this._y<=n&&(this._y=n,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=i&&(this._y=i,!isNaN(s)&&this._m>s&&(this._m=s)),this.el.innerHTML=function(t){var e,n,i,o,a,s=t._o,r=t._m,h=t._y,u=h===s.minYear,d=h===s.maxYear,f='<div class="pika-title">',c=!0,m=!0;for(i=[],e=0;e<12;e++)i.push('<option value="'+e+'"'+(e===r?" selected":"")+(u&&e<s.minMonth||d&&e>s.maxMonth?"disabled":"")+">"+s.i18n.months[e]+"</option>");for(o='<div class="pika-label">'+s.i18n.months[r]+'<select class="pika-select pika-select-month">'+i.join("")+"</select></div>",l(s.yearRange)?(e=s.yearRange[0],n=s.yearRange[1]+1):(e=h-s.yearRange,n=1+h+s.yearRange),i=[];e<n&&e<=s.maxYear;e++)e>=s.minYear&&i.push('<option value="'+e+'"'+(e===h?" selected":"")+">"+e+"</option>");return a='<div class="pika-label">'+h+s.yearSuffix+'&nbsp;&nbsp;年<select class="pika-select pika-select-year">'+i.join("")+"</select></div>",s.showMonthAfterYear,f+=a+o,u&&(0===r||s.minMonth>=r)&&(c=!1),d&&(11===r||s.maxMonth<=r)&&(m=!1),f+='<button class="pika-prev'+(c?"":" is-disabled")+'" type="button">'+s.i18n.previousMonth+"</button>",(f+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+s.i18n.nextMonth+"</button>")+"</div>"}(this)+this.render(this._y,this._m),e.bound&&(this.adjustPosition(),"hidden"!==e.field.type&&o(function(){e.trigger.focus()},1)),"function"==typeof this._o.onDraw){var r=this;o(function(){r._o.onDraw.call(r)},0)}}},adjustPosition:function(){var t,e,n,o=this._o.trigger,a=o,s=this.el.offsetWidth,r=this.el.offsetHeight,l=window.innerWidth||i.documentElement.clientWidth,h=window.innerHeight||i.documentElement.clientHeight,u=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop;if("function"==typeof o.getBoundingClientRect)t=(n=o.getBoundingClientRect()).left+window.pageXOffset,e=n.bottom+window.pageYOffset;else for(t=a.offsetLeft,e=a.offsetTop+a.offsetHeight;a=a.offsetParent;)t+=a.offsetLeft,e+=a.offsetTop;t+s>l&&(t=t-s+o.offsetWidth),e+r>h+u&&(e=e-r-o.offsetHeight),this.el.style.cssText="position:absolute;left:"+t+"px;top:"+e+"px;"},render:function(t,e){var n,i,o=this._o,a=new Date,s=[31,(n=t,n%4==0&&n%100!=0||n%400==0?29:28),31,30,31,30,31,31,30,31,30,31][e],r=new Date(t,e,1).getDay(),l=[],f=[];u(a),o.firstDay>0&&(r-=o.firstDay)<0&&(r+=7);for(var c,p=s+r,_=p;_>7;)_-=7;p+=7-_;for(var v=0,D=0;v<p;v++){var y=new Date(t,e,v-r+1),w=o.minDate&&y<o.minDate||o.maxDate&&y>o.maxDate,b=!!h(this._d)&&d(y,this._d),M=d(y,a),x=v<r||v>=s+r;f.push(g(v-r+1,b,M,w,x)),7==++D&&(l.push((c=f,"<tr>"+(o.isRTL?c.reverse():c).join("")+"</tr>")),f=[],D=0)}return i=l,'<table cellpadding="0" cellspacing="0" class="pika-table">'+function(t){var e,n=[];for(e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+m(t,e)+'">'+m(t,e,!0)+"</abbr></th>");return"<thead>"+(t.isRTL?n.reverse():n).join("")+"</thead>"}(o)+"<tbody>"+i.join("")+"</tbody></table>"},isVisible:function(){return this._v},show:function(){var t,e;this._v||(this._o.bound&&a(i,"click",this._onClick),"is-hidden",(t=this.el).className=(e=(" "+t.className+" ").replace(" is-hidden "," ")).trim?e.trim():e.replace(/^\s+|\s+$/g,""),this._v=!0,this.draw(),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t,e,n=this._v;!1!==n&&(this._o.bound&&s(i,"click",this._onClick),this.el.style.cssText="",t=this.el,r(t,e="is-hidden")||(t.className=""===t.className?e:t.className+" "+e),this._v=!1,void 0!==n&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&&(s(this._o.field,"change",this._onInputChange),this._o.bound&&(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},p});